<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Solicitud ciudadana para el derecho a decidir sobre cargos públicos">
    <meta name="keywords" content="defensor del pueblo, iniciativa popular, derecho a decidir">
    <title>Solicitud Derecho a Decidir</title>
    <style>
        :root{--azul-principal:#1a4e8a;--azul-hover:#0d3a6d;--gris-bordes:#d3d3d3;--rojo-error:#cc0000;--fondo-body:#5bb1f3;--fondo-container:#f8f9fa;--sombra:0 4px 6px -1px rgba(0,0,0,0.1)}*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',system-ui,sans-serif;line-height:1.6;background:var(--fondo-body);min-height:100vh;padding:1rem}.container{max-width:800px;margin:0 auto;background:var(--fondo-container);border-radius:12px;box-shadow:var(--sombra);padding:2rem}.header__content{display:flex;align-items:center;gap:1.5rem;margin-bottom:2rem;flex-wrap:wrap;justify-content:center;text-align:center}.header__icon{width:clamp(60px,8vw,100px);height:auto;aspect-ratio:1;border-radius:12px;box-shadow:var(--sombra)}.header__title{font-size:clamp(1.5rem,4vw,2rem);color:var(--azul-principal);margin-bottom:0.5rem}.form-section{background:#fff;border-radius:12px;padding:1.5rem;margin:1.5rem 0;border:2px solid var(--gris-bordes);transition:transform .2s,box-shadow .2s}.form-section:hover{transform:translateY(-2px);box-shadow:var(--sombra)}.form-group{margin-bottom:1.25rem}label{display:block;margin-bottom:.5rem;font-weight:600}input,textarea{width:100%;padding:.875rem;border:2px solid var(--gris-bordes);border-radius:8px;font-size:1rem;transition:border-color .3s}input:focus,textarea:focus{border-color:var(--azul-principal);outline:3px solid rgba(26,78,138,.1)}.copy-btn{background:var(--azul-principal);color:#fff;padding:1rem 2rem;border:none;border-radius:8px;cursor:pointer;font-weight:600;width:100%;transition:all .3s;display:flex;align-items:center;justify-content:center;gap:.5rem}.copy-btn:hover{background:var(--azul-hover);transform:translateY(-2px);box-shadow:var(--sombra)}.required:after{content:" *";color:var(--rojo-error)}.copy-message{opacity:0;transform:translateY(10px);transition:all .3s;background:#e8f4ff;padding:1rem;border-radius:8px;text-align:center;margin-top:1rem}.copy-message.visible{opacity:1;transform:translateY(0)}.campo-error{border-color:var(--rojo-error)!important}.label-error{color:var(--rojo-error)}.gmail-btn:hover{background:#b03c30!important}.fa-envelope{margin-right:8px}@media (max-width:480px){.container{padding:1rem}}</style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header__content">
                <img src="derecho_decidir.jpeg" alt="Icono derecho a decidir" class="header__icon" loading="lazy">
                <div class="header__text">
                    <h1 class="header__title">Solicitud Ciudadana</h1>
                    <p class="header__subtitle">Propuesta de iniciativa popular</p>
                </div>
            </div>
        </header>

        <main class="main-content">
            <form id="solicitudForm" class="email-form">
                <div class="form-section">
                    <h3>Datos del Ciudadano</h3>
                    <div class="form-group">
                        <label for="nombre" class="required">Nombre completo:</label>
                        <input type="text" id="nombre" required>
                    </div>
                    <div class="form-group">
                        <label for="dni" class="required">DNI/NIE:</label>
                        <input type="text" id="dni" required>
                    </div>
                    <div class="form-group">
                        <label for="nacimiento" class="required">Fecha y lugar de nacimiento:</label>
                        <input type="text" id="nacimiento" required>
                    </div>
                    <div class="form-group">
                        <label for="direccion" class="required">Dirección completa:</label>
                        <input type="text" id="direccion" required>
                    </div>
                    <div class="form-group">
                        <label for="telefono" class="required">Teléfono de contacto:</label>
                        <input type="tel" id="telefono" required>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Solicitud</h3>
                    <div class="form-group">
                        <label class="required">Texto de la solicitud:</label>
                        <textarea id="solicitudText" rows="6" readonly>
Solicito el derecho a poder decidir destituir a un cargo político de forma inmediata durante su mandato cuando hace mal su trabajo y elegir a otro en su lugar cuando la mayoría de los ciudadanos lo requieran.

Se solicita a través de una proposición de ley por iniciativa popular, la cual será entregada por el Defensor del Pueblo al Congreso de los Diputados, una vez recibidas todas las solicitudes.</textarea>
                    </div>
                </div>

                <button type="button" class="copy-btn" onclick="generarSolicitud()">
                    Generar correo para copiar
                </button>
                <p id="mensajeCopiado" class="copy-message">¡Texto copiado al portapapeles!</p>
            </form>
        </main>

        <section class="instrucciones">
            <h3>Instrucciones de uso:</h3>
            <ol>
                <li>Complete todos los campos obligatorios</li>
                <li>Haga clic en "Generar correo"</li>
                <li>El sistema creará automáticamente el texto listo para pegar</li>
                <li>Enviar a: <strong>registro@defensordelpueblo.es</strong></li>
            </ol>
        </section>
    </div>

    <script>
        function generarSolicitud() {
            // Validación de campos (se mantiene igual)
            const camposRequeridos = document.querySelectorAll('[required]');
            let valido = true;
            
            camposRequeridos.forEach(campo => {
                if (!campo.value.trim()) {
                    campo.style.borderColor = 'red';
                    valido = false;
                } else {
                    campo.style.borderColor = '#ddd';
                }
            });
            
            if (!valido) {
                alert('Por favor complete todos los campos marcados con *');
                return;
            }
            
            // Generar contenido del correo
            const contenido = `Para: registro@defensordelpueblo.es
        Asunto: Solicitud formal de derecho a decidir
        
        ------------------------------------------
        
        Ciudadano solicitante:
        - Nombre completo: ${document.getElementById('nombre').value}
        - DNI/NIE: ${document.getElementById('dni').value}
        - Fecha/lugar nacimiento: ${document.getElementById('nacimiento').value}
        - Dirección: ${document.getElementById('direccion').value}
        - Teléfono: ${document.getElementById('telefono').value}
        
        ------------------------------------------
        
        Solicitud formal:
        ${document.getElementById('solicitudText').value}`;
        
            // Copiar al portapeles
            navigator.clipboard.writeText(contenido.trim()).then(() => {
                const mensaje = document.getElementById('mensajeCopiado');
                mensaje.classList.add('visible');
                setTimeout(() => mensaje.classList.remove('visible'), 3000);
                
                // Detectar dispositivo
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                // Opciones para todos los dispositivos
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'send-options';
                optionsDiv.innerHTML = `
                    <p style="margin: 15px 0 10px; font-weight: bold; text-align: center;">Elija cómo enviar:</p>
                    <div class="btn-group">
                        <button onclick="window.location.href='mailto:registro@defensordelpueblo.es?subject=Solicitud%20formal%20de%20derecho%20a%20decidir&body=${encodeURIComponent(contenido)}'" 
                            class="email-btn">
                            <i class="fas fa-envelope"></i> Usar cliente de correo
                        </button>
                        <button onclick="window.open('https://mail.google.com/mail/?view=cm&fs=1&to=registro@defensordelpueblo.es&su=Solicitud%20formal%20de%20derecho%20a%20decidir&body=${encodeURIComponent(contenido)}', '_blank')" 
                            class="gmail-btn">
                            <i class="fab fa-google"></i> Abrir Gmail
                        </button>
                    </div>
                `;
                
                // Eliminar opciones anteriores si existen
                const oldOptions = document.querySelector('.send-options');
                if (oldOptions) oldOptions.remove();
                
                document.querySelector('.email-form').appendChild(optionsDiv);
                
            }).catch(() => {
                alert('Por favor copie manualmente este texto:\n\n' + contenido);
            });
        }
        </script>
        
        <style>
        .send-options {
            margin-top: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .email-btn, .gmail-btn {
            flex: 1;
            min-width: 200px;
            padding: 12px;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .email-btn {
            background: #1a4e8a;
        }
        
        .email-btn:hover {
            background: #0d3a6d;
            transform: translateY(-2px);
        }
        
        .gmail-btn {
            background: #D44638;
        }
        
        .gmail-btn:hover {
            background: #b03c30;
            transform: translateY(-2px);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 768px) {
            .btn-group {
                flex-direction: column;
            }
            
            .email-btn, .gmail-btn {
                width: 100%;
            }
        }
        </style>
</body>
</html>
